const hre = require("hardhat");

function decodeOpenseaCalldata(calldata) {
  const iSeaPort = new hre.ethers.utils.Interface(abiJson);
  const order = iSeaPort.decodeFunctionData("fulfillBasicOrder", calldata);
  return order
}

async function sweepNft(nftSweepAddress, orderDatas, value) {
  const nftSweepContract = await ethers.getContractAt("NFTSweep", nftSweepAddress);
  return await nftSweepContract.batchBuyFromMarkets(orderDatas, { value: value, gasLimit: "300000" });
}

async function sweepNftOnlyOpensea(nftSweepAddress, orderDatas) {
  const nftSweepContract = await ethers.getContractAt("NFTSweep", nftSweepAddress);
  return await nftSweepContract.batchBuyOpenSea(orderDatas, {value: value});
}

async function main() {
  let orderData1 = "0xe7acab24000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000005800000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000000000000000000000000000f849d39d20e1e789068d000a9c4f279efeacbadf00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000046000000000000000000000000000000000000000000000000000000000000004e0000000000000000000000000342bcd57552f33a2e21b146b9d1d1f95d99c8de900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000063d9280f0000000000000000000000000000000000000000000000000000000063fe120f0000000000000000000000000000000000000000000000000000000000000000360c6ebe000000000000000000000000000000000000000097abcfb4eb16daec0000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000317a8fe0f1c7102e7674ab231441e485c64c178a00000000000000000000000000000000000000000000000000000000000829a8000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004547258d1ec000000000000000000000000000000000000000000000000000004547258d1ec000000000000000000000000000342bcd57552f33a2e21b146b9d1d1f95d99c8de90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c6bf526340000000000000000000000000000000000000000000000000000001c6bf526340000000000000000000000000000000a26b00c1f0df003000390027140000faa719000000000000000000000000000000000000000000000000000000000000004154b79a273b79f46e63c4786cda3539be5635a2cf1f5855f939de05e2839f8cbd23d5f37251e836daf71b5f410c9b2af1a42cdbf25c71f27711be7116f2c088b61b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5d24601";
  let orderData2 = "0xe7acab24000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000005800000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000000000000000000000000000f849d39d20e1e789068d000a9c4f279efeacbadf00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000046000000000000000000000000000000000000000000000000000000000000004e00000000000000000000000005aacad7d55d8d42f114c0400ea4edc8e56b6308700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000063b6a7b000000000000000000000000000000000000000000000000000000000648997b00000000000000000000000000000000000000000000000000000000000000000360c6ebe00000000000000000000000000000000000000001b7e7758665abfb50000007b02230091a7ed01230072f7006a004d60a8d4e71d599b8104250f0000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000317a8fe0f1c7102e7674ab231441e485c64c178a0000000000000000000000000000000000000000000000000000000000004570000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004547258d1ec000000000000000000000000000000000000000000000000000004547258d1ec0000000000000000000000000005aacad7d55d8d42f114c0400ea4edc8e56b630870000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c6bf526340000000000000000000000000000000000000000000000000000001c6bf526340000000000000000000000000000000a26b00c1f0df003000390027140000faa7190000000000000000000000000000000000000000000000000000000000000041c701479b8afbc85d7add6881b970fdbb172341d265049db7967ac9b463fbe7575b2a67ed184c48187b8fbd4c30dd10d9996f691594198f05e814c900788430641b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5d24601";
  let orders = [ { marketId: 0, value: ethers.utils.parseEther("0.02"), orderData: orderData1 },
    { marketId: 0, value: ethers.utils.parseEther("0.02"), orderData: orderData2 },
  ];
  let value = ethers.utils.parseEther("0.04");
  const contractAddr = "0xeeE61026AaC3d5cb750A50959e9A2A810AeB08B6";
  const tx = await sweepNft(contractAddr, orders, value);
  console.log(tx)
}

// We recommend this pattern to be able to use async/await everywhere
// and properly handle errors.
main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
